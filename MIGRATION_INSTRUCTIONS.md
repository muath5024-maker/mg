# ๐ ุชุนูููุงุช ุชุดุบูู Migration

## โ ุงูุฎุทูุฉ 1: ูุดุฑ Worker - **ุชูุช โ**

Worker ุชู ูุดุฑู ุจูุฌุงุญ:
- **Version ID:** `4a2d3a75-717d-4b11-90fe-c8b595591e45`
- **URL:** https://misty-mode-b68b.baharista1.workers.dev

---

## ๐ ุงูุฎุทูุฉ 2: ุชุดุบูู Migration ูู Supabase

### ุงููุทููุจ:
ุชุดุบูู migration script ูุชุจุณูุท RLS Policies

### ุงูุฎุทูุงุช:

1. **ุงูุชุญ Supabase Dashboard:**
   - ุงุฐูุจ ุฅูู: https://supabase.com/dashboard/project/sirqidofuvphqcxqchyc

2. **ุงุฐูุจ ุฅูู SQL Editor:**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: **SQL Editor**
   - ุฃู: https://supabase.com/dashboard/project/sirqidofuvphqcxqchyc/sql/new

3. **ุงูุณุฎ ูุญุชูู ุงูููู:**
   - ุงูุชุญ ุงูููู: `mbuy-backend/migrations/20250106000005_simplify_rls_policies.sql`
   - ุงูุณุฎ ุงููุญุชูู ูุงููุงู

4. **ุงูุตู ูู SQL Editor:**
   - ุงูุตู ุงููุญุชูู ูู SQL Editor
   - ุงุถุบุท **Run** (ุฃู F5)

5. **ุชุญูู ูู ุงููุชูุฌุฉ:**
   - ูุฌุจ ุฃู ุชุฑู ุฑุณุงุฆู: `โ ุฌููุน ุงูุณูุงุณุงุช ุชู ุฅูุดุงุคูุง ุจูุฌุงุญ!`
   - ุนุฏุฏ ุณูุงุณุงุช stores: 5 ุนูู ุงูุฃูู
   - ุนุฏุฏ ุณูุงุณุงุช products: 4 ุนูู ุงูุฃูู

---

## ๐งช ุงูุฎุทูุฉ 3: ุงูุงุฎุชุจุงุฑ

ุจุนุฏ ุชุดุบูู Migration:

1. **ุงูุชุญ ุชุทุจูู Flutter**
2. **ุณุฌู ุฏุฎูู ูุชุงุฌุฑ**
3. **ุงุฐูุจ ุฅูู ุฅุถุงูุฉ ููุชุฌ**
4. **ุฃุถู ููุชุฌ ุฌุฏูุฏ:**
   - ุงูุงุณู
   - ุงููุตู
   - ุงูุณุนุฑ
   - ุงููููุฉ
   - (ุงุฎุชูุงุฑู) ุตูุฑุฉ

5. **ุงุญูุธ ุงูููุชุฌ**

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ูุง ูุธูุฑ ุฎุทุฃ "ููุณ ูุฏูู ุตูุงุญูุฉ ุงููุตูู" (FORBIDDEN)
- โ ูุชู ุฅุถุงูุฉ ุงูููุชุฌ ุจูุฌุงุญ
- โ ูุธูุฑ ุงูููุชุฌ ูู ุงููุงุฆูุฉ

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

### 1. ุชุญูู ูู Logs:
- ูู Supabase Dashboard: **Logs** โ **Postgres Logs**
- ุงุจุญุซ ุนู ุฃุฎุทุงุก RLS ุฃู FORBIDDEN

### 2. ุชุญูู ูู Policies:
```sql
-- ูู SQL Editor:
SELECT tablename, policyname, cmd 
FROM pg_policies 
WHERE tablename IN ('stores', 'products')
ORDER BY tablename, policyname;
```

### 3. ุชุญูู ูู Worker Logs:
- ูู Cloudflare Dashboard: **Workers** โ **misty-mode-b68b** โ **Logs**
- ุงุจุญุซ ุนู ุฃุฎุทุงุก ูู `POST /secure/products`

---

## ๐ ููุฎุต ุงูุชุนุฏููุงุช

| ุงูุฎุทูุฉ | ุงูุญุงูุฉ |
|--------|--------|
| 1. ูุดุฑ Worker | โ **ููุชููุฉ** |
| 2. ุชุดุบูู Migration | โณ **ูู ุงูุงูุชุธุงุฑ** |
| 3. ุงูุงุฎุชุจุงุฑ | โณ **ุจุนุฏ Migration** |

---

**ุจุนุฏ ุชุดุบูู Migrationุ ูุฌุจ ุฃู ุชุนูู ุฅุถุงูุฉ ุงูููุชุฌ ุจุฏูู ุฃุฎุทุงุก!** ๐

