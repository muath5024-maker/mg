# โ ุชูุฑูุฑ ุชูููุฐ ุงูุฌุฏุงูู ูู Supabase

**ุงูุชุงุฑูุฎ:** ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุชู ุงูุชูููุฐ ุจูุฌุงุญ

---

## โ ุงูุฌุฏุงูู ุงููููุฐุฉ

### 1. **ุฌุฏูู `stories`** โ
- โ ููุฌูุฏ (ูุงู ููุฌูุฏุงู ูุณุจูุงู)
- โ ุชู ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงูููููุฏุฉ:
  - `product_id` - ุฑุจุท ูุน ุงูููุชุฌุงุช
  - `type` - ููุน ุงููุญุชูู (video/image)
  - `media_url` - ุฑุงุจุท ุงูููุฏูู/ุงูุตูุฑุฉ
  - `thumbnail_url` - ุฑุงุจุท ุงูุตูุฑุฉ ุงููุตุบุฑุฉ
  - `caption` - ุงููุตู
  - `is_active` - ุญุงูุฉ ุงููุดุงุท
  - `views_count` - ุนุฏุฏ ุงููุดุงูุฏุงุช
  - `likes_count` - ุนุฏุฏ ุงูุฅุนุฌุงุจุงุช
  - `comments_count` - ุนุฏุฏ ุงูุชุนูููุงุช
  - `shares_count` - ุนุฏุฏ ุงููุดุงุฑูุงุช
  - `bookmarks_count` - ุนุฏุฏ ุงูุฅุดุงุฑุงุช ุงููุฑุฌุนูุฉ
  - `updated_at` - ุชุงุฑูุฎ ุงูุชุญุฏูุซ

### 2. **ุฌุฏูู `story_views`** โ
- โ ููุฌูุฏ
- โ Indexes ููุฌูุฏุฉ

### 3. **ุฌุฏูู `story_likes`** โ
- โ ููุฌูุฏ
- โ Indexes ููุฌูุฏุฉ

### 4. **ุฌุฏูู `user_fcm_tokens`** โ
- โ ููุฌูุฏ
- โ Indexes ููุฌูุฏุฉ

---

## โ Functions ุงููููุฐุฉ

### 1. **`increment_story_views`** โ
- โ ุชู ุฅูุดุงุคูุง
- โ ุชุฒูุฏ ุนุฏุฏ ุงููุดุงูุฏุงุช ุชููุงุฆูุงู

### 2. **`update_story_likes_count`** โ
- โ ุชู ุฅูุดุงุคูุง
- โ ุชุญุฏุซ ุนุฏุฏ ุงูุฅุนุฌุงุจุงุช ุชููุงุฆูุงู

---

## โ Triggers ุงููููุฐุฉ

### 1. **`update_stories_updated_at`** โ
- โ ุชู ุฅูุดุงุคูุง
- โ ุชุญุฏุซ `updated_at` ุชููุงุฆูุงู ุนูุฏ ุชุญุฏูุซ ุงูุณุฌู

### 2. **`update_user_fcm_tokens_updated_at`** โ
- โ ุชู ุฅูุดุงุคูุง
- โ ุชุญุฏุซ `updated_at` ุชููุงุฆูุงู ุนูุฏ ุชุญุฏูุซ ุงูุณุฌู

---

## ๐ ููุฎุต ุงูุชูููุฐ

| ุงูุนูุตุฑ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|-----------|
| ุฌุฏูู `stories` | โ ููุฌูุฏ | ุชู ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงูููููุฏุฉ |
| ุฌุฏูู `story_views` | โ ููุฌูุฏ | - |
| ุฌุฏูู `story_likes` | โ ููุฌูุฏ | - |
| ุฌุฏูู `user_fcm_tokens` | โ ููุฌูุฏ | - |
| Function `increment_story_views` | โ ูููุฐ | - |
| Function `update_story_likes_count` | โ ูููุฐ | - |
| Trigger `update_stories_updated_at` | โ ูููุฐ | - |
| Trigger `update_user_fcm_tokens_updated_at` | โ ูููุฐ | - |

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ **ุงูุฌุฏุงูู ุฌุงูุฒุฉ** - ูููู ุงุณุชุฎุฏุงููุง ูู ุงูุชุทุจูู
2. โณ **ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ** (ุงุฎุชูุงุฑู)
3. โณ **ุงุฎุชุจุงุฑ Explore Screen** ูุน ุงูุจูุงูุงุช ุงูุญููููุฉ

---

## ๐ ููุงุญุธุงุช

- ุฌููุน ุงูุฌุฏุงูู ููุฌูุฏุฉ ููุญุฏุซุฉ
- ุฌููุน Indexes ููุฌูุฏุฉ ููุฃุฏุงุก
- ุฌููุน Functions ู Triggers ูููุฐุฉ
- **ูุง ุชูุฌุฏ RLS Policies** (ุญุณุจ ุงูุทูุจ)

---

**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู

