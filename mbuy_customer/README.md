# ğŸ›’ MBUY Customer - ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„

<div align="center">

![MBUY Logo](https://via.placeholder.com/200x80?text=MBUY)

**ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ³ÙˆÙ‚ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ù…Ù†ØµØ© MBUY**

[![Flutter](https://img.shields.io/badge/Flutter-3.10.0+-02569B?style=for-the-badge&logo=flutter)](https://flutter.dev)
[![Dart](https://img.shields.io/badge/Dart-3.0+-0175C2?style=for-the-badge&logo=dart)](https://dart.dev)
[![Cloudflare](https://img.shields.io/badge/Cloudflare-Workers-F38020?style=for-the-badge&logo=cloudflare)](https://workers.cloudflare.com)
[![Supabase](https://img.shields.io/badge/Supabase-Database-3ECF8E?style=for-the-badge&logo=supabase)](https://supabase.com)

</div>

---

## ğŸ“‹ ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

- [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
- [Ø§Ù„Ù…ÙŠØ²Ø§Øª](#-Ø§Ù„Ù…ÙŠØ²Ø§Øª)
- [Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©](#-Ø§Ù„Ø¨Ù†ÙŠØ©-Ø§Ù„ØªÙ‚Ù†ÙŠØ©)
- [API Endpoints](#-api-endpoints)
- [Ø§Ù„ØªØ«Ø¨ÙŠØª](#-Ø§Ù„ØªØ«Ø¨ÙŠØª)
- [Ø§Ù„ØªØ´ØºÙŠÙ„](#-Ø§Ù„ØªØ´ØºÙŠÙ„)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

**MBUY Customer** Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ ØªØ³ÙˆÙ‚ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙŠØªÙŠØ­ ØªØµÙØ­ Ø§Ù„Ù…ØªØ§Ø¬Ø± ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§ØªØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ù…ÙØ¶Ù„Ø©ØŒ ÙˆØ¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡.

### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

- ğŸ›ï¸ **ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª** - Ø¨Ø­Ø« ÙˆØªØµÙ†ÙŠÙØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
- ğŸ›’ **Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚** - Ø¥Ø¶Ø§ÙØ©ØŒ ØªØ¹Ø¯ÙŠÙ„ØŒ Ø­Ø°Ù
- â¤ï¸ **Ø§Ù„Ù…ÙØ¶Ù„Ø©** - Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©
- ğŸ“¦ **Ø§Ù„Ø·Ù„Ø¨Ø§Øª** - Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- ğŸ“ **Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†** - Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ØªÙˆØµÙŠÙ„
- ğŸ” **Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©** - ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†

---

## âœ¨ Ø§Ù„Ù…ÙŠØ²Ø§Øª

### ğŸ›ï¸ ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø±Ø§Ø¦Ø¬Ø©
- Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙÙ„Ø§Ø´
- Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª

### ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚
- Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ø³Ù„Ø©
- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª
- Ø­Ø°Ù Ø§Ù„Ø¹Ù†Ø§ØµØ±
- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹

### â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©
- Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©
- Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
- Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©

### ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
- Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§ØªÙŠ
- ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
- Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª

### ğŸ“ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
- Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯
- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
- Ø­Ø°Ù Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
- ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

---

## ğŸ”Œ API Endpoints

### Base URL
```
https://misty-mode-b68b.baharista1.workers.dev
```

### Public Endpoints (Ø¨Ø¯ÙˆÙ† Ù…ØµØ§Ø¯Ù‚Ø©)

| Endpoint | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| `GET /api/public/products` | Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª |
| `GET /api/public/products/:id` | ØªÙØ§ØµÙŠÙ„ Ù…Ù†ØªØ¬ |
| `GET /api/public/products/trending` | Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø±Ø§Ø¦Ø¬Ø© |
| `GET /api/public/products/flash-deals` | Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙÙ„Ø§Ø´ |
| `GET /api/public/stores` | Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø± |
| `GET /api/public/stores/featured` | Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø© |
| `GET /api/public/platform-categories` | Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© |
| `GET /api/public/search/products` | Ø¨Ø­Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª |

### Customer Endpoints (ØªØªØ·Ù„Ø¨ Ù…ØµØ§Ø¯Ù‚Ø©)

#### Ø§Ù„Ø³Ù„Ø©
| Endpoint | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| `GET /api/customer/cart` | Ø¬Ù„Ø¨ Ø§Ù„Ø³Ù„Ø© |
| `POST /api/customer/cart` | Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© |
| `PUT /api/customer/cart/:itemId` | ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ© |
| `DELETE /api/customer/cart/:itemId` | Ø­Ø°Ù Ø¹Ù†ØµØ± |
| `DELETE /api/customer/cart` | ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© |
| `GET /api/customer/cart/count` | Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± |

#### Ø§Ù„Ù…ÙØ¶Ù„Ø©
| Endpoint | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| `GET /api/customer/favorites` | Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙØ¶Ù„Ø© |
| `POST /api/customer/favorites` | Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø© |
| `DELETE /api/customer/favorites/:productId` | Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø© |
| `POST /api/customer/favorites/toggle` | ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙØ¶Ù„Ø© |
| `GET /api/customer/favorites/count` | Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© |

#### Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª
| Endpoint | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| `POST /api/customer/checkout/validate` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹ |
| `POST /api/customer/checkout` | Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ |
| `GET /api/customer/checkout/orders` | Ø·Ù„Ø¨Ø§ØªÙŠ |
| `GET /api/customer/checkout/orders/:id` | ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨ |
| `POST /api/customer/checkout/orders/:id/cancel` | Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ |

#### Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
| Endpoint | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| `GET /api/customer/addresses` | Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† |
| `POST /api/customer/addresses` | Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† |
| `PUT /api/customer/addresses/:id` | ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† |
| `DELETE /api/customer/addresses/:id` | Ø­Ø°Ù Ø¹Ù†ÙˆØ§Ù† |
| `PUT /api/customer/addresses/:id/default` | ØªØ¹ÙŠÙŠÙ† Ø§ÙØªØ±Ø§Ø¶ÙŠ |

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MBUY Customer App                              â”‚
â”‚   (Flutter + Riverpod + GoRouter)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cloudflare Worker                             â”‚
â”‚   (Hono Framework + JWT Auth)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Supabase                                    â”‚
â”‚   PostgreSQL + Auth + Storage                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

| Ø§Ù„Ø·Ø¨Ù‚Ø© | Ø§Ù„ØªÙ‚Ù†ÙŠØ© | Ø§Ù„ÙˆØµÙ |
|--------|---------|-------|
| **Frontend** | Flutter 3.10+ | ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ |
| **State** | Riverpod 3.0+ | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© |
| **Navigation** | GoRouter 14+ | Ø§Ù„ØªÙ†Ù‚Ù„ |
| **Backend** | Cloudflare Workers | API Gateway |
| **Database** | Supabase PostgreSQL | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |

---

## ğŸ“‹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª

- Flutter SDK >= 3.10.0
- Dart SDK >= 3.0.0
- Android Studio / VS Code
- Android SDK (Ù„Ù„Ù€ Android)
- Xcode (Ù„Ù„Ù€ iOS)

---

## ğŸš€ Ø§Ù„ØªØ«Ø¨ÙŠØª

```bash
# Clone the repository
git clone https://github.com/your-repo/mbuy.git
cd mbuy/mbuy_customer

# Install dependencies
flutter pub get

# Run the app
flutter run
```

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```bash
cd saleh

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù€ dependencies
flutter pub get

# ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
flutter run
```

### 3. Ø¥Ø¹Ø¯Ø§Ø¯ Cloudflare Worker

```bash
cd mbuy-worker

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù€ dependencies
npm install

# Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
cp .env.example .env
# Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ .env

# ØªØ´ØºÙŠÙ„ Ù…Ø­Ù„ÙŠØ§Ù‹
npm run dev

# Ø§Ù„Ù†Ø´Ø±
npm run deploy
```

### 4. Ø¥Ø¹Ø¯Ø§Ø¯ Supabase

1. Ø£Ù†Ø´Ø¦ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯ ÙÙŠ [Supabase](https://supabase.com)
2. Ø§Ù†Ø³Ø® Ø§Ù„Ù€ URL Ùˆ Keys
3. Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„ migrations Ù…Ù† Ù…Ø¬Ù„Ø¯ `supabase/migrations`

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### Flutter App (`saleh/`)

```
lib/
â”œâ”€â”€ main.dart                    # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ customer/               # ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ (CustomerApp)
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ theme/          # Ø§Ù„Ø«ÙŠÙ… (Light/Dark)
â”‚   â”‚   â”‚       â”œâ”€â”€ app_theme.dart
â”‚   â”‚   â”‚       â””â”€â”€ theme_provider.dart
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/   # Repository Pattern
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base_repository.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ product_repository.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cart_repository.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ store_repository.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ category_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ customer_api_service.dart
â”‚   â”‚   â”‚   â””â”€â”€ customer_providers.dart
â”‚   â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”‚   â”œâ”€â”€ home/           # Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚   â”‚   â”‚   â”œâ”€â”€ cart/           # Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚
â”‚   â”‚   â”‚   â”œâ”€â”€ favorites/      # Ø§Ù„Ù…ÙØ¶Ù„Ø©
â”‚   â”‚   â”‚   â”œâ”€â”€ search/         # Ø§Ù„Ø¨Ø­Ø«
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/     # Ø§Ù„ÙØ¦Ø§Øª
â”‚   â”‚   â”‚   â”œâ”€â”€ store/          # ØµÙØ­Ø© Ø§Ù„Ù…ØªØ¬Ø±
â”‚   â”‚   â”‚   â””â”€â”€ product/        # ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
â”‚   â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”‚   â”œâ”€â”€ state_widgets.dart  # Loading/Error/Empty
â”‚   â”‚   â”‚   â”œâ”€â”€ cached_image.dart   # ØªØ®Ø²ÙŠÙ† Ø§Ù„ØµÙˆØ±
â”‚   â”‚   â”‚   â””â”€â”€ app_header.dart
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ customer_router.dart
â”‚   â”‚   â””â”€â”€ customer_app.dart
â”‚   â”‚
â”‚   â””â”€â”€ merchant/               # ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ§Ø¬Ø±
â”‚       â”œâ”€â”€ features/           # Ù…ÙŠØ²Ø§Øª Ø®Ø§ØµØ©
â”‚       â”‚   â”œâ”€â”€ delivery/       # Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
â”‚       â”‚   â”œâ”€â”€ payments/       # Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹
â”‚       â”‚   â”œâ”€â”€ shipping/       # Ø§Ù„Ø´Ø­Ù†
â”‚       â”‚   â”œâ”€â”€ webstore/       # Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
â”‚       â”‚   â”œâ”€â”€ whatsapp/       # ØªÙƒØ§Ù…Ù„ ÙˆØ§ØªØ³Ø§Ø¨
â”‚       â”‚   â””â”€â”€ qrcode/         # Ù…ÙˆÙ„Ø¯ QR
â”‚       â”œâ”€â”€ routes/             # Router Ø®Ø§Øµ
â”‚       â””â”€â”€ merchant_app.dart
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ app_config.dart         # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API
â”‚   â”œâ”€â”€ constants/              # Ø§Ù„Ø«ÙˆØ§Ø¨Øª
â”‚   â”œâ”€â”€ controllers/            # Controllers
â”‚   â”œâ”€â”€ l10n/                   # Ø§Ù„ØªØ±Ø¬Ù…Ø©
â”‚   â”œâ”€â”€ router/                 # GoRouter
â”‚   â”œâ”€â”€ services/               # Ø§Ù„Ø®Ø¯Ù…Ø§Øª
â”‚   â””â”€â”€ theme/                  # Ø§Ù„Ø«ÙŠÙ…
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/                   # Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”œâ”€â”€ dashboard/              # Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
â”‚   â”œâ”€â”€ products/               # Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
â”‚   â”œâ”€â”€ marketing/              # Ø§Ù„ØªØ³ÙˆÙŠÙ‚
â”‚   â”œâ”€â”€ ai_studio/              # Ø§Ø³ØªÙˆØ¯ÙŠÙˆ AI
â”‚   â”œâ”€â”€ conversations/          # Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
â”‚   â”œâ”€â”€ merchant/               # Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØ§Ø¬Ø±
â”‚   â””â”€â”€ community/              # Ø§Ù„Ù…Ø¬ØªÙ…Ø¹
â””â”€â”€ shared/
    â”œâ”€â”€ widgets/                # Ø§Ù„ÙˆÙŠØ¯Ø¬ØªØ³ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
    â”œâ”€â”€ screens/                # Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
    â””â”€â”€ utils/                  # Ø§Ù„Ø£Ø¯ÙˆØ§Øª
```

### Cloudflare Worker (`mbuy-worker/`)

```
src/
â”œâ”€â”€ index.ts                    # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
â”œâ”€â”€ types.ts                    # TypeScript Types
â”œâ”€â”€ endpoints/                  # API Endpoints
â”‚   â”œâ”€â”€ supabaseAuth.ts         # Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”œâ”€â”€ store.ts                # Ø§Ù„Ù…ØªØ¬Ø±
â”‚   â”œâ”€â”€ products.ts             # Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
â”‚   â”œâ”€â”€ coupons.ts              # Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª
â”‚   â”œâ”€â”€ flash-sales.ts          # Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§Ø·ÙØ©
â”‚   â”œâ”€â”€ analytics.ts            # Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
â”‚   â”œâ”€â”€ ai.ts                   # AI
â”‚   â””â”€â”€ ...                     # Ø§Ù„Ù…Ø²ÙŠØ¯
â”œâ”€â”€ routes/                     # Route Modules
â”‚   â”œâ”€â”€ public.ts               # Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
â”‚   â”œâ”€â”€ auth.ts                 # Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”œâ”€â”€ merchant.ts             # Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ§Ø¬Ø±
â”‚   â”œâ”€â”€ marketing.ts            # Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚
â”‚   â”œâ”€â”€ ai.ts                   # Ù…Ø³Ø§Ø±Ø§Øª AI
â”‚   â””â”€â”€ ...                     # Ø§Ù„Ù…Ø²ÙŠØ¯
â”œâ”€â”€ middleware/                 # Middleware
â”‚   â”œâ”€â”€ supabaseAuthMiddleware.ts
â”‚   â”œâ”€â”€ rateLimiter.ts
â”‚   â””â”€â”€ errorHandler.ts
â”œâ”€â”€ utils/                      # Utilities
â”‚   â”œâ”€â”€ supabase.ts
â”‚   â””â”€â”€ logging.ts
â””â”€â”€ durable-objects/            # Durable Objects
```

---

## ğŸ”§ Ø§Ù„ØªØ´ØºÙŠÙ„

### Development Mode

```bash
# Flutter App
cd saleh
flutter run

# Cloudflare Worker
cd mbuy-worker
npm run dev
```

### Production Build

```bash
# Flutter App
flutter build apk --release    # Android
flutter build ios --release    # iOS

# Cloudflare Worker
npm run deploy
```

---

## ğŸ“š API Documentation

### Base URL
```
https://your-worker.workers.dev
```

### Authentication
Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø¢Ù…Ù†Ø© ØªØªØ·Ù„Ø¨ Bearer Token:
```
Authorization: Bearer <access_token>
```

### Endpoints Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

#### Auth
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/auth/supabase/register` | ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ |
| POST | `/auth/supabase/login` | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| POST | `/auth/supabase/logout` | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ |
| POST | `/auth/supabase/refresh` | ØªØ¬Ø¯ÙŠØ¯ Token |

#### Merchant
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/secure/merchant/store` | Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø± |
| POST | `/secure/merchant/store` | Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ¬Ø± |
| GET | `/secure/merchant/products` | Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª |
| POST | `/secure/merchant/products` | Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ |

#### Marketing
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/secure/marketing/coupons` | Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª |
| POST | `/secure/marketing/coupons` | Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ† |
| GET | `/secure/marketing/flash-sales` | Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§Ø·ÙØ© |
| POST | `/secure/marketing/flash-sales` | Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø±Ø¶ |

[Ø±Ø§Ø¬Ø¹ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù€ API](./docs/API.md)

---

## âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

### Flutter App (`lib/core/app_config.dart`)

```dart
class AppConfig {
  static const String apiBaseUrl = 'https://your-worker.workers.dev';
  static const String appName = 'MBUY Merchant';
  static const String appVersion = '1.0.0';
}
```

### Cloudflare Worker (`.env`)

```env
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
EDGE_INTERNAL_KEY=your-internal-key
```

---

## ğŸ›ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©

### Repository Pattern

ØªØ³ØªØ®Ø¯Ù… Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ù…Ø· Repository Ù„ÙØµÙ„ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:

```dart
// Result Pattern Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆØ§Ù„ÙØ´Ù„
sealed class Result<T> {
  factory Result.success(T data) = Success<T>;
  factory Result.failure(String message) = Failure<T>;
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù… Repository
final result = await productRepository.getProducts();
result.fold(
  onSuccess: (products) => // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª,
  onFailure: (message, code) => // Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø£,
);
```

### State Widgets

Ù…ÙƒÙˆÙ†Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©:
- `LoadingWidget` / `ShimmerLoadingWidget` - Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
- `AppErrorWidget` / `NetworkErrorWidget` - Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- `EmptyStateWidget` / `EmptyCartWidget` - Ø­Ø§Ù„Ø§Øª Ø§Ù„ÙØ±Ø§Øº
- `AsyncValueBuilder` - Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø§Øª Riverpod

### Theme System

Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ ÙˆØ§Ù„Ø¯Ø§ÙƒÙ† Ù…Ø¹ Ø­ÙØ¸ Ø§Ù„ØªÙØ¶ÙŠÙ„:

```dart
// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹
ref.read(themeProvider.notifier).toggleTheme();

// Ø§Ø³ØªØ®Ø¯Ø§Ù… System Theme
ref.read(themeProvider.notifier).useSystemTheme();
```

---

## ğŸ¤ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

Ù†Ø±Ø­Ø¨ Ø¨Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª! ÙŠØ±Ø¬Ù‰ Ø§ØªØ¨Ø§Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

1. Fork Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
2. Ø£Ù†Ø´Ø¦ branch Ø¬Ø¯ÙŠØ¯ (`git checkout -b feature/amazing-feature`)
3. Commit Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª (`git commit -m 'Add amazing feature'`)
4. Push Ø¥Ù„Ù‰ Branch (`git push origin feature/amazing-feature`)
5. Ø§ÙØªØ­ Pull Request

---

## ğŸ“„ Ø§Ù„Ø±Ø®ØµØ©

Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø®Øµ ØªØ­Øª [MIT License](LICENSE)

---

## ğŸ“ Ø§Ù„ØªÙˆØ§ØµÙ„

- **Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ**: support@mbuy.sa
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: [www.mbuy.sa](https://www.mbuy.sa)

---

<div align="center">

**ØµÙÙ†Ø¹ Ø¨Ù€ â¤ï¸ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©**

Â© 2025-2026 MBUY. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.

</div>
